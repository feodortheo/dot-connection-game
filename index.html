<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dot Connection Game</title>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/face_detection@0.4/face_detection.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.10.0/dist/tf.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: #000;
            color: #fff;
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow: hidden;
        }

        .container {
            position: relative;
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .dots-container {
            position: relative;
            width: 600px;
            height: 200px;
            margin-bottom: 50px;
        }

        .dot {
            position: absolute;
            width: 20px;
            height: 20px;
            background-color: #ff69b4;
            border-radius: 50%;
            top: 50%;
            transform: translateY(-50%);
            transition: all 0.5s ease;
        }

        .dot1 {
            left: 50px;
        }

        .dot2 {
            right: 50px;
        }

        .root {
            position: absolute;
            height: 3px;
            background-color: #ff69b4;
            top: 50%;
            transform: translateY(-50%);
            transition: all 0.5s ease;
        }

        .root.initial {
            left: 70px;
            right: 70px;
        }

        .root.correct {
            left: 50%;
            right: 50%;
            transform: translateY(-50%) translateX(-50%);
            width: 0;
        }

        .root.incorrect {
            left: 25%;
            right: 25%;
        }

        .buttons {
            display: flex;
            gap: 30px;
        }

        .btn {
            padding: 15px 30px;
            font-size: 18px;
            border: 2px solid #ff69b4;
            background-color: transparent;
            color: #ff69b4;
            cursor: pointer;
            border-radius: 5px;
            transition: all 0.3s ease;
        }

        .btn:hover {
            background-color: #ff69b4;
            color: #000;
        }

        .btn:active {
            transform: scale(0.95);
        }

        .victory-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: transparent;
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .victory-text {
            color: #ff69b4;
            font-weight: bold;
            text-shadow: 0 0 20px #ff69b4;
            position: absolute;
            pointer-events: none;
            z-index: 1001;
            will-change: transform, opacity;
            backface-visibility: hidden;
            transform: translateZ(0);
        }

        .victory-text.love {
            /* Animation will be set inline for immediate start */
        }

        @keyframes flyAround {
            0% {
                transform: translate(0, 0) rotate(0deg);
            }
            25% {
                transform: translate(100vw, -50vh) rotate(90deg);
            }
            50% {
                transform: translate(50vw, 100vh) rotate(180deg);
            }
            75% {
                transform: translate(-50vw, 50vh) rotate(270deg);
            }
            100% {
                transform: translate(0, 0) rotate(360deg);
            }
        }

        @keyframes flyDiagonal {
            0% {
                transform: translate(0, 0) rotate(0deg);
            }
            50% {
                transform: translate(100vw, 100vh) rotate(180deg);
            }
            100% {
                transform: translate(0, 0) rotate(360deg);
            }
        }

        @keyframes flyHorizontal {
            0% {
                transform: translate(-100px, 0) rotate(0deg);
            }
            50% {
                transform: translate(calc(100vw + 100px), 0) rotate(180deg);
            }
            100% {
                transform: translate(-100px, 0) rotate(360deg);
            }
        }

        @keyframes flyVertical {
            0% {
                transform: translate(0, -100px) rotate(0deg);
            }
            50% {
                transform: translate(0, calc(100vh + 100px)) rotate(180deg);
            }
            100% {
                transform: translate(0, -100px) rotate(360deg);
            }
        }

        @keyframes fallDown {
            0% {
                transform: translateY(-200px) rotate(0deg);
                opacity: 1;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(calc(100vh + 200px)) rotate(360deg);
                opacity: 0;
            }
        }

        @keyframes fontPulse {
            0% {
                font-size: inherit;
                text-shadow: 0 0 20px #ff69b4;
            }
            50% {
                font-size: 1.3em;
                text-shadow: 0 0 30px #ff69b4, 0 0 40px #ff69b4;
            }
            100% {
                font-size: inherit;
                text-shadow: 0 0 20px #ff69b4;
            }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .heart {
            position: absolute;
            color: #ff69b4;
            font-size: 24px;
            animation: fall 4s linear infinite;
            pointer-events: none;
            text-shadow: 0 0 10px #ff69b4;
            filter: drop-shadow(0 0 5px rgba(255, 105, 180, 0.8));
            z-index: 999;
            will-change: transform, opacity;
            backface-visibility: hidden;
            transform: translateZ(0);
        }

        @keyframes fall {
            0% {
                transform: translateY(-100px) rotate(0deg);
                opacity: 1;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }

        .restart-btn {
            padding: 15px 30px;
            font-size: 18px;
            border: 2px solid #ff69b4;
            background-color: #ff69b4;
            color: #fff;
            cursor: pointer;
            border-radius: 5px;
            transition: all 0.3s ease;
            margin-top: 20px;
            text-shadow: 0 0 10px #fff;
            box-shadow: 0 0 20px rgba(255, 105, 180, 0.5), 0 0 40px rgba(255, 105, 180, 0.3), 0 0 60px rgba(255, 105, 180, 0.1);
            animation: buttonGlow 2s ease-in-out infinite alternate;
            z-index: 10000;
            position: relative;
        }

        .restart-btn:hover {
            background-color: #ff1493;
            color: #fff;
            text-shadow: 0 0 15px #fff;
            box-shadow: 0 0 30px rgba(255, 20, 147, 0.8), 0 0 60px rgba(255, 20, 147, 0.5), 0 0 90px rgba(255, 20, 147, 0.3);
            transform: scale(1.05);
        }

        .photo-upload-section {
            position: absolute;
            top: 20px;
            right: 20px;
            background-color: rgba(0, 0, 0, 0.8);
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #ff69b4;
            z-index: 100;
        }

        .photo-upload-section h3 {
            color: #ff69b4;
            margin-bottom: 15px;
            text-align: center;
        }

        .photo-input-group {
            margin-bottom: 15px;
        }

        .photo-input-group label {
            color: #ff69b4;
            display: block;
            margin-bottom: 5px;
            font-size: 14px;
        }

        .photo-input {
            width: 100%;
            padding: 8px;
            border: 1px solid #ff69b4;
            border-radius: 5px;
            background-color: transparent;
            color: #ff69b4;
            font-size: 12px;
        }

        .upload-btn {
            width: 100%;
            padding: 10px;
            background-color: #ff69b4;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .upload-btn:hover {
            background-color: #ff1493;
            transform: scale(1.05);
        }

        .upload-btn:disabled {
            background-color: #666;
            cursor: not-allowed;
            transform: none;
        }

        .person-photo {
            position: absolute;
            width: 100px;
            height: 100px;
            object-fit: cover;
            object-position: center center;
            border: 3px solid #ff69b4;
            border-radius: 50%;
            transition: all 0.5s ease;
            z-index: 10;
        }

        @keyframes headGlow {
            0% {
                filter: drop-shadow(0 0 5px #ff69b4);
            }
            100% {
                filter: drop-shadow(0 0 15px #ff69b4) drop-shadow(0 0 25px rgba(255, 105, 180, 0.5));
            }
        }

        .person-photo.dot1-photo {
            top: -110px;
            left: -50px;
        }

        .person-photo.dot2-photo {
            top: -110px;
            right: -50px;
        }

        .processing-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: rgba(0, 0, 0, 0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10000;
        }

        .processing-container {
            background-color: #000;
            border: 2px solid #ff69b4;
            border-radius: 10px;
            padding: 40px;
            text-align: center;
            max-width: 400px;
        }

        .processing-text {
            color: #ff69b4;
            font-size: 18px;
            margin-bottom: 20px;
        }

        .processing-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #ff69b4;
            border-top: 4px solid transparent;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Welcome Screen */
        .welcome-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: #000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .welcome-text {
            font-size: 32px;
            color: #ff69b4;
            font-weight: bold;
            text-shadow: 0 0 20px #ff69b4;
            margin-bottom: 30px;
            text-align: center;
            animation: welcomePulse 2s ease-in-out infinite;
            line-height: 1.4;
        }

        .welcome-subtitle {
            font-size: 32px;
            color: #ff69b4;
            font-weight: bold;
            text-shadow: 0 0 20px #ff69b4;
            margin-bottom: 30px;
            text-align: center;
            line-height: 1.4;
        }

        .welcome-button {
            background-color: #ff69b4;
            color: #fff;
            border: none;
            border-radius: 15px;
            padding: 15px 40px;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 0 20px rgba(255, 105, 180, 0.3);
        }

        .welcome-button:hover {
            background-color: #ff1493;
            transform: scale(1.05);
            box-shadow: 0 0 30px rgba(255, 105, 180, 0.5);
        }

        @keyframes welcomePulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .butterfly {
            width: 120px;
            height: 80px;
            cursor: pointer;
            animation: butterflyFlyAround 8s ease-in-out infinite;
            transition: all 0.3s ease;
            position: absolute;
            z-index: 1001;
        }

        .butterfly:hover {
            transform: scale(1.1);
        }

        /* Butterfly body */
        .butterfly::before {
            content: '';
            position: absolute;
            width: 6px;
            height: 60px;
            background: linear-gradient(to bottom, #8B4513, #A0522D, #8B4513);
            border-radius: 3px;
            left: 50%;
            top: 10px;
            transform: translateX(-50%);
            box-shadow: 
                0 0 10px rgba(139, 69, 19, 0.5),
                inset 0 0 5px rgba(255, 255, 255, 0.2);
        }

        /* Left wing */
        .butterfly::after {
            content: '';
            position: absolute;
            width: 50px;
            height: 35px;
            background: 
                radial-gradient(circle at 30% 30%, #ff69b4, #ff1493),
                radial-gradient(circle at 70% 20%, #ffc0cb, #ff69b4),
                radial-gradient(circle at 20% 70%, #ff1493, #ff69b4),
                linear-gradient(45deg, #ff69b4, #ff1493, #ff69b4);
            border-radius: 50% 20% 50% 20%;
            left: 0;
            top: 15px;
            transform: rotate(-15deg);
            box-shadow: 
                0 0 15px rgba(255, 105, 180, 0.6),
                inset 0 0 10px rgba(255, 255, 255, 0.3),
                0 0 5px rgba(255, 20, 147, 0.4);
        }

        /* Right wing - using a separate element */
        .butterfly .right-wing {
            position: absolute;
            width: 50px;
            height: 35px;
            background: 
                radial-gradient(circle at 30% 30%, #ff69b4, #ff1493),
                radial-gradient(circle at 70% 20%, #ffc0cb, #ff69b4),
                radial-gradient(circle at 20% 70%, #ff1493, #ff69b4),
                linear-gradient(-45deg, #ff69b4, #ff1493, #ff69b4);
            border-radius: 20% 50% 20% 50%;
            right: 0;
            top: 15px;
            transform: rotate(15deg);
            box-shadow: 
                0 0 15px rgba(255, 105, 180, 0.6),
                inset 0 0 10px rgba(255, 255, 255, 0.3),
                0 0 5px rgba(255, 20, 147, 0.4);
        }

        /* Wing patterns */
        .butterfly .wing-pattern {
            position: absolute;
            width: 8px;
            height: 8px;
            background: radial-gradient(circle, #fff, #ffc0cb);
            border-radius: 50%;
            top: 20px;
            left: 15px;
            box-shadow: 0 0 5px rgba(255, 255, 255, 0.8);
        }

        .butterfly .wing-pattern:nth-child(2) {
            top: 35px;
            left: 25px;
            width: 6px;
            height: 6px;
        }

        .butterfly .wing-pattern:nth-child(3) {
            top: 25px;
            right: 15px;
            left: auto;
        }

        .butterfly .wing-pattern:nth-child(4) {
            top: 40px;
            right: 25px;
            left: auto;
            width: 6px;
            height: 6px;
        }

        @keyframes butterflyFlyAround {
            0% {
                transform: translate(0vw, 0vh) rotate(0deg);
            }
            12.5% {
                transform: translate(20vw, -10vh) rotate(45deg);
            }
            25% {
                transform: translate(40vw, 5vh) rotate(90deg);
            }
            37.5% {
                transform: translate(60vw, -15vh) rotate(135deg);
            }
            50% {
                transform: translate(80vw, 10vh) rotate(180deg);
            }
            62.5% {
                transform: translate(60vw, 30vh) rotate(225deg);
            }
            75% {
                transform: translate(40vw, 50vh) rotate(270deg);
            }
            87.5% {
                transform: translate(20vw, 30vh) rotate(315deg);
            }
            100% {
                transform: translate(0vw, 0vh) rotate(360deg);
            }
        }

        /* Kissing Screen */
        .kissing-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: #000;
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .kissing-text {
            font-size: 32px;
            color: #ff69b4;
            font-weight: bold;
            text-shadow: 0 0 20px #ff69b4;
            margin-bottom: 30px;
            text-align: center;
            line-height: 1.4;
        }

        .kissing-subtitle {
            font-size: 32px;
            color: #ff69b4;
            font-weight: bold;
            text-shadow: 0 0 20px #ff69b4;
            margin-bottom: 30px;
            text-align: center;
            line-height: 1.4;
        }

        /* Fighter Selection Screen */
        .fighter-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: #000;
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .fighter-title {
            font-size: 42px;
            color: #ff69b4;
            font-weight: bold;
            text-shadow: 0 0 20px #ff69b4;
            margin-bottom: 40px;
            text-align: center;
        }

        .fighter-upload-section {
            background-color: rgba(0, 0, 0, 0.8);
            padding: 30px;
            border-radius: 15px;
            border: 2px solid #ff69b4;
            max-width: 500px;
            width: 90%;
        }

        .fighter-upload-section h3 {
            color: #ff69b4;
            margin-bottom: 20px;
            text-align: center;
            font-size: 24px;
        }

        .fighter-input-group {
            margin-bottom: 20px;
        }

        .fighter-input-group label {
            color: #ff69b4;
            display: block;
            margin-bottom: 8px;
            font-size: 16px;
        }

        .fighter-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #ff69b4;
            border-radius: 8px;
            background-color: transparent;
            color: #ff69b4;
            font-size: 14px;
        }

        .fighter-name-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #ff69b4;
            border-radius: 8px;
            background-color: transparent;
            color: #ff69b4;
            font-size: 14px;
            margin-top: 8px;
        }

        .fighter-upload-row {
            display: flex;
            gap: 15px;
            align-items: flex-end;
            margin-bottom: 20px;
        }

        .fighter-upload-row .fighter-input-group {
            flex: 1;
            margin-bottom: 0;
        }

        .camera-buttons {
            display: flex;
            gap: 10px;
            margin-top: 10px;
            justify-content: center;
        }

        .camera-btn, .gallery-btn {
            background-color: #ff69b4;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .camera-btn:hover, .gallery-btn:hover {
            background-color: #ff1493;
            transform: translateY(-2px);
        }

        .camera-btn:active, .gallery-btn:active {
            transform: translateY(0);
        }

        .start-game-btn {
            width: 100%;
            padding: 15px;
            background-color: #ff69b4;
            color: #fff;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            transition: all 0.3s ease;
            margin-top: 20px;
        }

        .start-game-btn:hover {
            background-color: #ff1493;
            transform: scale(1.05);
        }

        .start-game-btn:disabled {
            background-color: #666;
            cursor: not-allowed;
            transform: none;
        }

        /* Game Screen */
        .game-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: #000;
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .question-header {
            position: absolute;
            top: 50px;
            left: 50%;
            transform: translateX(-50%);
            color: #ff69b4;
            font-size: 24px;
            font-weight: bold;
            text-align: center;
            text-shadow: 0 0 15px #ff69b4;
            z-index: 1001;
            opacity: 1;
        }

        .question-header.fade-out {
            animation: fadeOut 1s ease-out forwards;
            animation-fill-mode: forwards;
        }

        @keyframes fadeOut {
            0% {
                opacity: 1;
            }
            100% {
                opacity: 0;
            }
        }

        .question-display {
            position: absolute;
            top: 120px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0, 0, 0, 0.8);
            color: #ff69b4;
            padding: 20px 30px;
            border-radius: 15px;
            border: 2px solid #ff69b4;
            font-size: 18px;
            font-weight: bold;
            text-align: center;
            max-width: 80%;
            box-shadow: 0 0 20px rgba(255, 105, 180, 0.3);
            z-index: 1001;
        }

        /* Answer feedback animations */
        .answer-heart {
            position: absolute;
            font-size: 40px;
            color: #ff69b4;
            pointer-events: none;
            z-index: 1002;
            animation: heartFloat 2s ease-out forwards;
        }

        .answer-broken-heart {
            position: absolute;
            font-size: 40px;
            color: #ff69b4;
            pointer-events: none;
            z-index: 1002;
            animation: brokenHeartFall 2s ease-out forwards;
        }

        @keyframes heartFloat {
            0% {
                opacity: 1;
                transform: translateY(0px) scale(1);
            }
            50% {
                opacity: 1;
                transform: translateY(-30px) scale(1.2);
            }
            100% {
                opacity: 0;
                transform: translateY(-60px) scale(0.8);
            }
        }

        @keyframes brokenHeartFall {
            0% {
                opacity: 1;
                transform: translateY(0px) rotate(0deg) scale(1);
            }
            50% {
                opacity: 1;
                transform: translateY(20px) rotate(10deg) scale(1.1);
            }
            100% {
                opacity: 0;
                transform: translateY(60px) rotate(20deg) scale(0.6);
            }
        }

        /* Kiss animations */
        .kiss-animation {
            position: absolute;
            font-size: 30px;
            color: #ff69b4;
            pointer-events: none;
            z-index: 1002;
            animation: kissFloat 3s ease-out forwards;
        }

        @keyframes kissFloat {
            0% {
                opacity: 1;
                transform: translateY(0px) scale(1) rotate(0deg);
            }
            25% {
                opacity: 1;
                transform: translateY(-20px) scale(1.2) rotate(10deg);
            }
            50% {
                opacity: 1;
                transform: translateY(-40px) scale(1.1) rotate(-5deg);
            }
            75% {
                opacity: 0.7;
                transform: translateY(-60px) scale(0.9) rotate(15deg);
            }
            100% {
                opacity: 0;
                transform: translateY(-80px) scale(0.7) rotate(25deg);
            }
        }

        .question-mark-animation {
            font-size: 30px;
            color: #ff69b4;
            position: absolute;
            pointer-events: none;
            z-index: 1002;
            animation: questionMarkFall 4s ease-out forwards;
        }

        @keyframes questionMarkFall {
            0% {
                opacity: 1;
                transform: translateY(0px) scale(1) rotate(0deg);
            }
            20% {
                opacity: 1;
                transform: translateY(60px) scale(1.1) rotate(10deg);
            }
            40% {
                opacity: 1;
                transform: translateY(120px) scale(1.2) rotate(-5deg);
            }
            60% {
                opacity: 1;
                transform: translateY(180px) scale(1.1) rotate(15deg);
            }
            80% {
                opacity: 0.8;
                transform: translateY(240px) scale(0.9) rotate(25deg);
            }
            100% {
                opacity: 0;
                transform: translateY(300px) scale(0.7) rotate(35deg);
            }
        }

        /* End Screen */
        .end-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: #000;
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .end-text {
            font-size: 36px;
            color: #ff69b4;
            font-weight: bold;
            text-shadow: 0 0 20px #ff69b4;
            margin-bottom: 30px;
            text-align: center;
        }

        @keyframes buttonGlow {
            0% {
                box-shadow: 0 0 20px rgba(255, 105, 180, 0.5), 0 0 40px rgba(255, 105, 180, 0.3), 0 0 60px rgba(255, 105, 180, 0.1);
                text-shadow: 0 0 10px #fff;
            }
            100% {
                box-shadow: 0 0 30px rgba(255, 105, 180, 0.7), 0 0 60px rgba(255, 105, 180, 0.4), 0 0 90px rgba(255, 105, 180, 0.2);
                text-shadow: 0 0 15px #fff, 0 0 25px #fff;
            }
        }
    </style>
</head>
<body>
    <!-- Welcome Screen -->
    <div class="welcome-screen" id="welcomeScreen">
        <div class="welcome-text">–ø—Ä–∏–≤–µ—Ç, –¥–æ—Ä–æ–≥—É—à–∏</div>
        <div class="welcome-subtitle">—è —Å–¥–µ–ª–∞–ª –∏–≥—Ä—É, —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –Ω–∞—Å–∫–æ–ª—å–∫–æ —Ö–æ—Ä–æ—à–æ –≤—ã –∑–Ω–∞–µ—Ç–µ –¥—Ä—É–≥ –¥—Ä—É–≥–∞</div>
        <div class="welcome-subtitle">–≥–æ—Ç–æ–≤—ã?</div>
        <button class="welcome-button" onclick="showKissingScreenWithHearts()">–¥–∞</button>
    </div>

    <!-- Kissing Screen -->
    <div class="kissing-screen" id="kissingScreen">
        <div class="kissing-text" id="kissingText">–¥–ª—è –Ω–∞—á–∞–ª–∞ –Ω—É–∂–Ω–æ –ø–æ—Ü–µ–ª–æ–≤–∞—Ç—å—Å—è</div>
        <button class="welcome-button" id="kissButton" onclick="showQuestionAndButton()">–º—ã –ø–æ—Ü–µ–ª–æ–≤–∞–ª–∏—Å—å</button>
    </div>

    <!-- Fighter Selection Screen -->
    <div class="fighter-screen" id="fighterScreen">
        <div class="fighter-title">–≤—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à–∏—Ö –±–æ–π—Ü–æ–≤</div>
        <div class="fighter-upload-section">
            <div class="fighter-upload-row">
                <div class="fighter-input-group">
                    <label for="fighter1">–ë–æ–µ—Ü 1:</label>
                    <input type="file" id="fighter1" class="fighter-input" accept="image/*" onchange="handleFighterUpload(1, this)">
                    <input type="text" id="name1" class="fighter-name-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è" onchange="updateFighterName(1, this)">
                    <div class="camera-buttons">
                        <button type="button" class="camera-btn" onclick="openCamera(1)">üì∑ –°–¥–µ–ª–∞—Ç—å —Ñ–æ—Ç–æ</button>
                        <button type="button" class="gallery-btn" onclick="openGallery(1)">üñºÔ∏è –ò–∑ –≥–∞–ª–µ—Ä–µ–∏</button>
                    </div>
                </div>
                <div class="fighter-input-group">
                    <label for="fighter2">–ë–æ–µ—Ü 2:</label>
                    <input type="file" id="fighter2" class="fighter-input" accept="image/*" onchange="handleFighterUpload(2, this)">
                    <input type="text" id="name2" class="fighter-name-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è" onchange="updateFighterName(2, this)">
                    <div class="camera-buttons">
                        <button type="button" class="camera-btn" onclick="openCamera(2)">üì∑ –°–¥–µ–ª–∞—Ç—å —Ñ–æ—Ç–æ</button>
                        <button type="button" class="gallery-btn" onclick="openGallery(2)">üñºÔ∏è –ò–∑ –≥–∞–ª–µ—Ä–µ–∏</button>
                    </div>
                </div>
            </div>
            <button class="start-game-btn" onclick="beginGame()" id="startGameBtn" disabled>–ù–∞—á–∞—Ç—å –ø—É—Ç—å –∫–æ—Å–º–∏—á–µ—Å–∫–æ–π –ª—é–±–≤–∏!</button>
        </div>
    </div>

    <!-- Game Screen -->
    <div class="game-screen" id="gameScreen">
        <div class="question-header" id="questionHeader"></div>
        <div class="question-display" id="questionDisplay"></div>
        <div class="container">
            <div class="dots-container">
                <div class="dot dot1">
                    <img id="person1" class="person-photo dot1-photo" style="display: none;" alt="Person 1">
                </div>
                <div class="dot dot2">
                    <img id="person2" class="person-photo dot2-photo" style="display: none;" alt="Person 2">
                </div>
                <div class="root initial"></div>
            </div>
            
            <div class="buttons">
                <button class="btn" onclick="moveDots('correct')">–ü—Ä–∞–≤–∏–ª—å–Ω–æ</button>
                <button class="btn" onclick="moveDots('incorrect')">–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ</button>
            </div>
        </div>
    </div>

    <!-- End Screen -->
    <div class="end-screen" id="endScreen">
        <div class="end-text">–ò–≥—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!</div>
        <button class="restart-btn" onclick="restartFromBeginning()">–ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞</button>
    </div>

    <!-- Victory Screen -->
    <div class="victory-screen" id="victoryScreen">
        <button class="restart-btn" onclick="restartGame()">–ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞</button>
    </div>

    <!-- Processing Modal -->
    <div class="processing-modal" id="processingModal">
        <div class="processing-container">
            <div class="processing-spinner"></div>
            <div class="processing-text" id="processingText">–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ª–∏—Ü...</div>
        </div>
    </div>

    <script>
        let currentDistance = 20; // Total path length starts at 20
        const maxDistance = 20;
        const minDistance = 0;
        let uploadedPhotos = { photo1: null, photo2: null };
        let fighterNames = { name1: '', name2: '' };
        let faceDetector = null;
        let currentScreen = 'welcome';
        let currentQuestion = '';
        let currentQuestionIndex = 0; // To alternate between names
        let headerFadeTimeout = null;
        let questionMarkInterval = null;
        
        // Array of absurd Russian questions
        const questions = [
            "–ï—Å–ª–∏ –±—ã –ø–∞—Ä—Ç–Ω—ë—Ä –±—ã–ª –æ–≤–æ—â–µ–º, —Ç–æ –∫–∞–∫–∏–º –∏–º–µ–Ω–Ω–æ –∏ –∫–∞–∫ –±—ã –æ–Ω —É–º–µ—Ä?",
            "–ß—Ç–æ –±—ã –≤—ã–±—Ä–∞–ª –ø–∞—Ä—Ç–Ω—ë—Ä: –≤—Å—é –∂–∏–∑–Ω—å —á–∏—Ö–∞—Ç—å –±–ª—ë—Å—Ç–∫–∞–º–∏ –∏–ª–∏ —Ä—ã–≥–∞—Ç—å —Ä–∞–¥—É–≥–æ–π?",
            "–ï—Å–ª–∏ –±—ã –ø–∞—Ä—Ç–Ω—ë—Ä –º–æ–≥ –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å—Å—è –≤ –ª—é–±–æ–π –ø—Ä–µ–¥–º–µ—Ç –º–µ–±–µ–ª–∏, —Ç–æ –≤ –∫–∞–∫–æ–π?",
            "–ö–∞–∫–æ–µ –∂–∏–≤–æ—Ç–Ω–æ–µ –ø–∞—Ä—Ç–Ω—ë—Ä –±—ã –∑–∞–≤—ë–ª, –µ—Å–ª–∏ –±—ã –æ–Ω–æ –±—ã–ª–æ —Ä–∞–∑–º–µ—Ä–æ–º —Å –º—É—Ö—É?",
            "–ß—Ç–æ –±—ã –≤—ã–±—Ä–∞–ª –ø–∞—Ä—Ç–Ω—ë—Ä: –∏–º–µ—Ç—å –Ω–æ—Å –Ω–∞ –ª–±—É –∏–ª–∏ —É—à–∏ –Ω–∞ –∫–æ–ª–µ–Ω—è—Ö?",
            "–ï—Å–ª–∏ –±—ã –ø–∞—Ä—Ç–Ω—ë—Ä –±—ã–ª –∑–∞–ø–∞—Ö–æ–º, —Ç–æ –∫–∞–∫–∏–º?",
            "–ß—Ç–æ –±—ã —Å–¥–µ–ª–∞–ª –ø–∞—Ä—Ç–Ω—ë—Ä, –µ—Å–ª–∏ –±—ã –ø—Ä–æ—Å–Ω—É–ª—Å—è –≤ —Ç–µ–ª–µ –ª–∞–º–ø—ã?",
            "–ö–∞–∫–æ–π –º—É–ª—å—Ç—è—à–Ω—ã–π –∑–ª–æ–¥–µ–π –ª—É—á—à–µ –≤—Å–µ–≥–æ –æ—Ç—Ä–∞–∂–∞–µ—Ç —Ö–∞—Ä–∞–∫—Ç–µ—Ä –ø–∞—Ä—Ç–Ω—ë—Ä–∞?",
            "–ï—Å–ª–∏ –±—ã –ø–∞—Ä—Ç–Ω—ë—Ä –º–æ–≥ –∑–∞–º–µ–Ω–∏—Ç—å —Å–≤–æ–∏ —Ä—É–∫–∏ —á–µ–º —É–≥–æ–¥–Ω–æ, —á—Ç–æ –±—ã —ç—Ç–æ –±—ã–ª–æ?",
            "–ß—Ç–æ –±—ã –≤—ã–±—Ä–∞–ª –ø–∞—Ä—Ç–Ω—ë—Ä: –∂–∏—Ç—å —Å –≥–æ–ª–æ—Å–æ–º —É—Ç–æ—á–∫–∏ –∏–ª–∏ —Å –≥–ª–∞–∑–∞–º–∏ —Ö–∞–º–µ–ª–µ–æ–Ω–∞?",
            "–ï—Å–ª–∏ –±—ã –ø–∞—Ä—Ç–Ω—ë—Ä –º–æ–≥ –æ–±—â–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –æ–¥–Ω—É –ø–µ—Å–Ω—é, —Ç–æ –∫–∞–∫—É—é –±—ã –≤—ã–±—Ä–∞–ª?",
            "–í –∫–∞–∫–æ–º –ø—Ä–µ–¥–º–µ—Ç–µ —à–∫–æ–ª—å–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã –ø–∞—Ä—Ç–Ω—ë—Ä –º–æ–≥ –±—ã —Å–¥–∞—Ç—å —ç–∫–∑–∞–º–µ–Ω –∑–∞ –∏–Ω–æ–ø–ª–∞–Ω–µ—Ç—è–Ω?",
            "–ï—Å–ª–∏ –±—ã –ø–∞—Ä—Ç–Ω—ë—Ä –±—ã–ª –ø–∏—Ü—Ü–µ–π, –∫–∞–∫–∏–µ –±—ã–ª–∏ –±—ã —Å–∞–º—ã–µ —Å—Ç—Ä–∞–Ω–Ω—ã–µ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã –≤ –Ω—ë–º?",
            "–ß—Ç–æ –±—ã –≤—ã–±—Ä–∞–ª –ø–∞—Ä—Ç–Ω—ë—Ä: –≤–æ–ª–æ—Å—ã –∏–∑ —Å–ø–∞–≥–µ—Ç—Ç–∏ –∏–ª–∏ –Ω–æ–≥—Ç–∏ –∏–∑ —Å—Ç–µ–∫–ª–∞?",
            "–ï—Å–ª–∏ –±—ã –ø–∞—Ä—Ç–Ω—ë—Ä –∂–∏–ª –≤ —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫–µ, —á—Ç–æ –±—ã–ª–æ –±—ã –µ–≥–æ —Å–æ—Å–µ–¥–æ–º?",
            "–ö–∞–∫—É—é —Å—É–ø–µ—Ä—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –ø–∞—Ä—Ç–Ω—ë—Ä –±—ã –≤—ã–±—Ä–∞–ª: –≤—ã–∑—ã–≤–∞—Ç—å –≥–æ–ª—É–±–µ–π –∏–ª–∏ –∏—Å—á–µ–∑–∞—Ç—å —Ç–æ–ª—å–∫–æ –Ω–∞ 2 —Å–µ–∫—É–Ω–¥—ã?",
            "–ï—Å–ª–∏ –±—ã –ø–∞—Ä—Ç–Ω—ë—Ä –±—ã–ª –≥–µ—Ä–æ–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω–æ–π –∏–≥—Ä—ã, –∫–∞–∫–æ–µ —É –Ω–µ–≥–æ –±—ã–ª–æ –±—ã —Å–∞–º–æ–µ –±–µ—Å–ø–æ–ª–µ–∑–Ω–æ–µ —É–º–µ–Ω–∏–µ?",
            "–ß—Ç–æ –±—ã –≤—ã–±—Ä–∞–ª –ø–∞—Ä—Ç–Ω—ë—Ä: –≤—Å–µ–≥–¥–∞ –ø–∞—Ö–Ω—É—Ç—å –∫–∞–∫ –±–µ–Ω–∑–∏–Ω –∏–ª–∏ –∫–∞–∫ –≤–∞—Ä—ë–Ω–∞—è –∫–∞–ø—É—Å—Ç–∞?",
            "–ï—Å–ª–∏ –±—ã –ø–∞—Ä—Ç–Ω—ë—Ä –±—ã–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ, —Ç–æ –∫–∞–∫–∏–º?",
            "–ß—Ç–æ –ø–∞—Ä—Ç–Ω—ë—Ä –¥–µ–ª–∞–ª –±—ã, –µ—Å–ª–∏ –±—ã –∫–∞–∂–¥–æ–µ –µ–≥–æ —Å–ª–æ–≤–æ –ø—Ä–µ–≤—Ä–∞—â–∞–ª–æ—Å—å –≤ –º–∏—É–∫–∞–Ω—å–µ –∫–æ—à–∫–∏?",
            "–ï—Å–ª–∏ –±—ã –ø–∞—Ä—Ç–Ω—ë—Ä –º–æ–≥ –∑–∞–º–µ–Ω–∏—Ç—å —Å–≤–æ—ë –æ—Ç—Ä–∞–∂–µ–Ω–∏–µ –≤ –∑–µ—Ä–∫–∞–ª–µ –Ω–∞ –ª—é–±–æ–µ —Å—É—â–µ—Å—Ç–≤–æ, —á—Ç–æ –±—ã —ç—Ç–æ –±—ã–ª–æ?",
            "–ß—Ç–æ –±—ã –≤—ã–±—Ä–∞–ª –ø–∞—Ä—Ç–Ω—ë—Ä: —Å–ø–∞—Ç—å –≤ –∞–∫–≤–∞—Ä–∏—É–º–µ –∏–ª–∏ –Ω–∞ –æ–±–ª–∞–∫–µ –∏–∑ —Ç–∞—Ä–∞–∫–∞–Ω–æ–≤?",
            "–ö–∞–∫–æ–µ –∂–∏–≤–æ—Ç–Ω–æ–µ –±—ã–ª–æ –±—ã —Ç–µ–ª–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª–µ–º –ø–∞—Ä—Ç–Ω—ë—Ä–∞, –µ—Å–ª–∏ –±—ã –æ–Ω–æ –Ω–æ—Å–∏–ª–æ –∫–æ—Å—Ç—é–º?",
            "–ï—Å–ª–∏ –±—ã –ø–∞—Ä—Ç–Ω—ë—Ä –º–æ–≥ –∑–∞—Å—Ç—Ä—è—Ç—å –Ω–∞–≤—Å–µ–≥–¥–∞ –≤ –æ–¥–Ω–æ–º –≤–æ–∑—Ä–∞—Å—Ç–µ, –Ω–æ –Ω–µ —Å–≤–æ—ë–º, —Ç–æ –∫–∞–∫–æ–º?",
            "–ö–∞–∫–∏–º –±—ã–ª –±—ã –ø–∞—Ä—Ç–Ω—ë—Ä, –µ—Å–ª–∏ –±—ã —Å—Ç–∞–ª –≤–∏–¥–æ–º –º–æ—Ä–æ–∂–µ–Ω–æ–≥–æ?",
            "–ß—Ç–æ –±—ã –≤—ã–±—Ä–∞–ª –ø–∞—Ä—Ç–Ω—ë—Ä: –∏–º–µ—Ç—å —è–∑—ã–∫ –¥–ª–∏–Ω–æ–π 2 –º–µ—Ç—Ä–∞ –∏–ª–∏ –≤–æ–ª–æ—Å—ã, —Ä–∞—Å—Ç—É—â–∏–µ –≤–Ω—É—Ç—Ä—å?",
            "–ï—Å–ª–∏ –±—ã –ø–∞—Ä—Ç–Ω—ë—Ä –º–æ–≥ —Ö–æ–¥–∏—Ç—å —Ç–æ–ª—å–∫–æ –∑–∞–¥–æ–º –Ω–∞–ø–µ—Ä—ë–¥ –∏–ª–∏ –±–æ–∫–æ–º, —á—Ç–æ –±—ã –æ–Ω –≤—ã–±—Ä–∞–ª?",
            "–ö–∞–∫–æ–π –ø—Ä–µ–¥–º–µ—Ç –≤ –¥–æ–º–µ –ø–∞—Ä—Ç–Ω—ë—Ä –±—ã –æ–∂–∏–≤–∏–ª –∏ —Å–¥–µ–ª–∞–ª —Å–≤–æ–∏–º –¥—Ä—É–≥–æ–º?",
            "–ï—Å–ª–∏ –±—ã –ø–∞—Ä—Ç–Ω—ë—Ä –±—ã–ª –ø—Ä–æ–∫–ª—è—Ç –∏ –¥–æ–ª–∂–µ–Ω –±—ã–ª –∫–∞–∂–¥–æ–µ —É—Ç—Ä–æ –ø—Ä–æ—Å—ã–ø–∞—Ç—å—Å—è –≤ –Ω–æ–≤–æ–º –≤–∏–¥–µ, –∫–µ–º –±—ã –æ–Ω —Ö–æ—Ç–µ–ª –±—ã—Ç—å –ø–µ—Ä–≤—ã–º?",
            "–ß—Ç–æ –±—ã –≤—ã–±—Ä–∞–ª –ø–∞—Ä—Ç–Ω—ë—Ä: –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –º–æ—Ä–≥–∞—Ç—å –∏–ª–∏ –≤—Å–µ–≥–¥–∞ –∫—Ä–∏—á–∞—Ç—å —à—ë–ø–æ—Ç–æ–º?",
            "–ï—Å–ª–∏ –±—ã –ø–∞—Ä—Ç–Ω—ë—Ä –±—ã–ª —Ü–≤–µ—Ç–æ–º, —Ç–æ –∫–∞–∫–∏–º, –Ω–æ –∑–∞–ø—Ä–µ—â—ë–Ω–Ω—ã–º –≤ –ø—Ä–∏—Ä–æ–¥–µ?",
            "–ß—Ç–æ –±—ã —Å–¥–µ–ª–∞–ª –ø–∞—Ä—Ç–Ω—ë—Ä, –µ—Å–ª–∏ –±—ã –µ–≥–æ —Ç–µ–Ω—å —Å—Ç–∞–ª–∞ —Ä–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞—Ç—å?",
            "–ï—Å–ª–∏ –±—ã –ø–∞—Ä—Ç–Ω—ë—Ä –º–æ–≥ –æ–±—â–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ —Å —Ä–∞—Å—Ç–µ–Ω–∏—è–º–∏, —Ç–æ —Å –∫–∞–∫–∏–º –æ–Ω –±—ã –ø–æ–¥—Ä—É–∂–∏–ª—Å—è?",
            "–ß—Ç–æ –±—ã –≤—ã–±—Ä–∞–ª –ø–∞—Ä—Ç–Ω—ë—Ä: –Ω–æ—Å–∏—Ç—å —Ö–≤–æ—Å—Ç –ø–∞–≤–ª–∏–Ω–∞ –∏–ª–∏ —Ä–æ–≥–∞ –æ–ª–µ–Ω—è –≤—Å—é –∂–∏–∑–Ω—å?",
            "–ï—Å–ª–∏ –±—ã –ø–∞—Ä—Ç–Ω—ë—Ä –±—ã–ª –æ–±—É–≤—å—é, —Ç–æ –∫–∞–∫–æ–π –∏–º–µ–Ω–Ω–æ?",
            "–í –∫–∞–∫–æ–º —Ñ–∏–ª—å–º–µ —É–∂–∞—Å–æ–≤ –ø–∞—Ä—Ç–Ω—ë—Ä –±—ã–ª –±—ã —á—É–¥–æ–≤–∏—â–µ–º –∏ –∫–∞–∫ –µ–≥–æ –±—ã –∑–≤–∞–ª–∏?",
            "–ß—Ç–æ –±—ã –≤—ã–±—Ä–∞–ª –ø–∞—Ä—Ç–Ω—ë—Ä: —Ä—É–∫–∏-–∫—Ä—ã–ª—å—è –∏–ª–∏ –Ω–æ–≥–∏-–∫–æ–ª—ë—Å–∞?",
            "–ï—Å–ª–∏ –±—ã –ø–∞—Ä—Ç–Ω—ë—Ä –º–æ–≥ –∫–∞–∂–¥—É—é –Ω–æ—á—å –º–µ–Ω—è—Ç—å —Å–≤–æ–π —Å–æ–Ω –Ω–∞ —á–µ–π-—Ç–æ —á—É–∂–æ–π, –∫–æ–≥–æ –±—ã –≤—ã–±—Ä–∞–ª?",
            "–ö–∞–∫–∞—è –∞–±—Å—É—Ä–¥–Ω–∞—è –≤–µ—â—å –º–æ–≥–ª–∞ –±—ã —Å—Ç–∞—Ç—å —Ç–æ—Ç–µ–º–æ–º –ø–∞—Ä—Ç–Ω—ë—Ä–∞?",
            "–ï—Å–ª–∏ –±—ã –ø–∞—Ä—Ç–Ω—ë—Ä –±—ã–ª –∑–≤—É–∫–æ–º, —Ç–æ –∫–∞–∫–∏–º?",
            "–ß—Ç–æ –±—ã –≤—ã–±—Ä–∞–ª –ø–∞—Ä—Ç–Ω—ë—Ä: —Ä–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å—Ç–∏—Ö–∞–º–∏ –∏–ª–∏ —Ç–æ–ª—å–∫–æ –º—ã—á–∞—Ç—å?",
            "–ï—Å–ª–∏ –±—ã –ø–∞—Ä—Ç–Ω—ë—Ä –∂–∏–ª –≤–Ω—É—Ç—Ä–∏ –ø—Ä–æ–¥—É–∫—Ç–∞ –≤ —Å—É–ø–µ—Ä–º–∞—Ä–∫–µ—Ç–µ, —Ç–æ –∫–∞–∫–æ–≥–æ?",
            "–ß—Ç–æ –±—ã –≤—ã–±—Ä–∞–ª –ø–∞—Ä—Ç–Ω—ë—Ä: –∂–∏—Ç—å –Ω–∞ –∫—Ä—ã—à–µ –∏–ª–∏ –ø–æ–¥ –∫—Ä–æ–≤–∞—Ç—å—é?",
            "–ï—Å–ª–∏ –±—ã –ø–∞—Ä—Ç–Ω—ë—Ä –º–æ–≥ –º–µ–Ω—è—Ç—å —Ñ–æ—Ä–º—É –≥–æ–ª–æ–≤—ã, –∫–∞–∫—É—é –≤—ã–±—Ä–∞–ª –±—ã –ø–µ—Ä–≤—ã–º –¥–µ–ª–æ–º?",
            "–ß—Ç–æ –±—ã –≤—ã–±—Ä–∞–ª –ø–∞—Ä—Ç–Ω—ë—Ä: –≤—Å–µ –º—ã—Å–ª–∏ –∑–≤—É—á–∞—Ç –≤ —Å–ª—É—Ö –∏–ª–∏ –≤—Å–µ —Å–Ω—ã —Ç—Ä–∞–Ω—Å–ª–∏—Ä—É—é—Ç—Å—è –ø–æ –¢–í?",
            "–ï—Å–ª–∏ –±—ã –ø–∞—Ä—Ç–Ω—ë—Ä —Å—Ç–∞–ª –¥—É—Ö–æ–º –ø—Ä–µ–¥–º–µ—Ç–∞, —Ç–æ —á–µ–≥–æ –∏–º–µ–Ω–Ω–æ?",
            "–ö–∞–∫—É—é –Ω–µ–ª–µ–ø—É—é —Ñ–æ–±–∏—é –ø–∞—Ä—Ç–Ω—ë—Ä –º–æ–≥ –±—ã –ø—Ä–∏–¥—É–º–∞—Ç—å —Å–∞–º?",
            "–ï—Å–ª–∏ –±—ã –ø–∞—Ä—Ç–Ω—ë—Ä —É–º–µ–ª –ª–µ—Ç–∞—Ç—å, –Ω–æ —Ç–æ–ª—å–∫–æ –≤–Ω–∏–∑, –∫–∞–∫ –±—ã –æ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª —ç—Ç–æ?",
            "–ß—Ç–æ –±—ã –≤—ã–±—Ä–∞–ª –ø–∞—Ä—Ç–Ω—ë—Ä: –∂–∏—Ç—å –±–µ–∑ –∫–æ–ª–µ–Ω–µ–π –∏–ª–∏ –±–µ–∑ –ª–æ–∫—Ç–µ–π?",
            "–ï—Å–ª–∏ –±—ã –ø–∞—Ä—Ç–Ω—ë—Ä –±—ã–ª —Å–ª–æ–≤–æ–º –≤ —Å–ª–æ–≤–∞—Ä–µ, —Ç–æ –∫–∞–∫–∏–º?",
            "–ß—Ç–æ –±—ã –≤—ã–±—Ä–∞–ª –ø–∞—Ä—Ç–Ω—ë—Ä: —Ö–æ–¥–∏—Ç—å –≤–µ—á–Ω–æ –º–æ–∫—Ä—ã–º –∏–ª–∏ –≤–µ—á–Ω–æ –ª–∏–ø–∫–∏–º?",
            "–ï—Å–ª–∏ –±—ã –ø–∞—Ä—Ç–Ω—ë—Ä –º–æ–≥ –∏–∑–¥–∞–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –∑–≤—É–∫ –≤—Å—é –∂–∏–∑–Ω—å, –∫–∞–∫–æ–π –±—ã –≤—ã–±—Ä–∞–ª?",
            "–ß—Ç–æ –±—ã –≤—ã–±—Ä–∞–ª –ø–∞—Ä—Ç–Ω—ë—Ä: –≤—Å–µ–≥–¥–∞ –µ—Å—Ç—å –µ–¥—É —Ö–æ–ª–æ–¥–Ω–æ–π –∏–ª–∏ –≤—Å–µ–≥–¥–∞ –Ω–∞–¥—É–≤–∞—Ç—å –µ—ë –ø–µ—Ä–µ–¥ —Ç–µ–º, –∫–∞–∫ —Å—ä–µ—Å—Ç—å?",
            "–ï—Å–ª–∏ –±—ã –ø–∞—Ä—Ç–Ω—ë—Ä –±—ã–ª —Å–∏–º–≤–æ–ª–æ–º —ç–º–æ–¥–∑–∏, —Ç–æ –∫–∞–∫–∏–º –Ω–µ–ª–µ–ø—ã–º?",
            "–ß—Ç–æ –±—ã –≤—ã–±—Ä–∞–ª –ø–∞—Ä—Ç–Ω—ë—Ä: –∂–∏—Ç—å –≤ –∞–∫–≤–∞—Ä–∏—É–º–µ –∏–ª–∏ –≤ –º–∏–∫—Ä–æ–≤–æ–ª–Ω–æ–≤–∫–µ (–±–µ–∑ —Ä–∞–±–æ—Ç—ã)?",
            "–ï—Å–ª–∏ –±—ã –ø–∞—Ä—Ç–Ω—ë—Ä —É–º–µ–ª –æ–±—â–∞—Ç—å—Å—è —Å –∂–∏–≤–æ—Ç–Ω—ã–º–∏, –Ω–æ —Ç–æ–ª—å–∫–æ —Å —Ç–∞—Ä–∞–∫–∞–Ω–∞–º–∏, —á—Ç–æ –±—ã –æ–Ω —É –Ω–∏—Ö —Å–ø—Ä–∞—à–∏–≤–∞–ª?",
            "–ö–∞–∫–æ–π —Å—É–ø–µ—Ä–≥–µ—Ä–æ–π —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –±–µ—Å–ø–æ–ª–µ–∑–Ω–æ–π —Å–∏–ª–æ–π –ø–æ–¥–æ—à—ë–ª –±—ã –ø–∞—Ä—Ç–Ω—ë—Ä—É?",
            "–ï—Å–ª–∏ –±—ã –ø–∞—Ä—Ç–Ω—ë—Ä –±—ã–ª –æ–±–ª–∞–∫–æ–º, –∫–∞–∫–æ–π —Ñ–æ—Ä–º—ã?",
            "–ß—Ç–æ –±—ã –≤—ã–±—Ä–∞–ª –ø–∞—Ä—Ç–Ω—ë—Ä: –∏–º–µ—Ç—å —Ç—Ä–∏ –Ω–æ—Å–∞ –∏–ª–∏ –Ω–∏ –æ–¥–Ω–æ–≥–æ?",
            "–ï—Å–ª–∏ –±—ã –ø–∞—Ä—Ç–Ω—ë—Ä –º–æ–≥ –æ–∂–∏–≤–∏—Ç—å –æ–¥–∏–Ω –ø—Ä–µ–¥–º–µ—Ç, –∫–∞–∫–æ–π –±—ã–ª –±—ã –ø–µ—Ä–≤—ã–º?",
            "–ß—Ç–æ –±—ã –≤—ã–±—Ä–∞–ª –ø–∞—Ä—Ç–Ω—ë—Ä: –≤—Å–µ–≥–¥–∞ —á–∏—Ö–∞—Ç—å –∫–æ—Ç—è—Ç–∞–º–∏ –∏–ª–∏ –∫–∞—à–ª—è—Ç—å –±–∞–±–æ—á–∫–∞–º–∏?",
            "–ï—Å–ª–∏ –±—ã –ø–∞—Ä—Ç–Ω—ë—Ä –±—ã–ª –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–º –±–∞–≥–æ–º, —Ç–æ –∫–∞–∫–∏–º?",
            "–ß—Ç–æ –±—ã –≤—ã–±—Ä–∞–ª –ø–∞—Ä—Ç–Ω—ë—Ä: —Ö–æ–¥–∏—Ç—å –Ω–∞ —Ä—É–∫–∞—Ö –∏–ª–∏ –µ—Å—Ç—å —Ç–æ–ª—å–∫–æ –≥–ª–∞–∑–∞–º–∏?",
            "–ï—Å–ª–∏ –±—ã –ø–∞—Ä—Ç–Ω—ë—Ä —Å—Ç–∞–ª –º–æ–Ω—Å—Ç—Ä–æ–º, –∫–∞–∫–æ–π –±—ã–ª–∞ –±—ã –µ–≥–æ —Å–ª–∞–±–æ—Å—Ç—å?",
            "–ö–∞–∫–∞—è —Ä–µ–∫–ª–∞–º–∞ –∏–¥–µ–∞–ª—å–Ω–æ –æ—Ç—Ä–∞–∂–∞–µ—Ç –ø–∞—Ä—Ç–Ω—ë—Ä–∞?",
            "–ï—Å–ª–∏ –±—ã –ø–∞—Ä—Ç–Ω—ë—Ä –º–æ–≥ –≤–∏–¥–µ—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ü–≤–µ—Ç, –∫–∞–∫–æ–π –≤—ã–±—Ä–∞–ª –±—ã?",
            "–ß—Ç–æ –±—ã –≤—ã–±—Ä–∞–ª –ø–∞—Ä—Ç–Ω—ë—Ä: –∏–º–µ—Ç—å —Ö–≤–æ—Å—Ç –∫—Ä—ã—Å—ã –∏–ª–∏ —Ö–æ–±–æ—Ç —Å–ª–æ–Ω–∞?",
            "–ï—Å–ª–∏ –±—ã –ø–∞—Ä—Ç–Ω—ë—Ä –±—ã–ª –ø–ª–∞–Ω–µ—Ç–æ–π, —Ç–æ –∫–∞–∫–æ–π –±—ã–ª –±—ã –∫–ª–∏–º–∞—Ç?",
            "–ß—Ç–æ –±—ã –≤—ã–±—Ä–∞–ª –ø–∞—Ä—Ç–Ω—ë—Ä: –≤—Å—ë –≤—Ä–µ–º—è —Ä–∏—Ñ–º–æ–≤–∞—Ç—å —Å–ª–æ–≤–∞ –∏–ª–∏ –≥–æ–≤–æ—Ä–∏—Ç—å –Ω–∞–æ–±–æ—Ä–æ—Ç?",
            "–ï—Å–ª–∏ –±—ã –ø–∞—Ä—Ç–Ω—ë—Ä –±—ã–ª –æ–±–ª–∞–∫–æ–º –ø—ã–ª–∏, —á—Ç–æ –±—ã –æ–Ω –¥–µ–ª–∞–ª?",
            "–ß—Ç–æ –±—ã –≤—ã–±—Ä–∞–ª –ø–∞—Ä—Ç–Ω—ë—Ä: –∂–∏—Ç—å –≤–µ—á–Ω–æ, –Ω–æ —Ç–æ–ª—å–∫–æ –∫–∞–∫ —Å—Ç—É–ª, –∏–ª–∏ —É–º–µ—Ä–µ—Ç—å —á–µ–ª–æ–≤–µ–∫–æ–º –∑–∞–≤—Ç—Ä–∞?",
            "–ï—Å–ª–∏ –±—ã –ø–∞—Ä—Ç–Ω—ë—Ä —Å—Ç–∞–ª –æ–≤–æ—â–µ–º, –µ–≥–æ –±—ã —Å—ä–µ–ª–∏ –∏–ª–∏ –ø–æ—Å–∞–¥–∏–ª–∏?",
            "–ß—Ç–æ –±—ã –≤—ã–±—Ä–∞–ª –ø–∞—Ä—Ç–Ω—ë—Ä: –ø–∞–ª—å—Ü—ã-–±–∞–Ω–∞–Ω—ã –∏–ª–∏ –∑—É–±—ã-–∫–æ–Ω—Ñ–µ—Ç—ã?",
            "–ï—Å–ª–∏ –±—ã –ø–∞—Ä—Ç–Ω—ë—Ä –±—ã–ª –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω–æ–π –≤–∏—Ä—É—Å–Ω–æ–π —Ä–µ–∫–ª–∞–º–æ–π, –∫–∞–∫–æ–π?",
            "–ß—Ç–æ –±—ã –≤—ã–±—Ä–∞–ª –ø–∞—Ä—Ç–Ω—ë—Ä: —Ö–æ–¥–∏—Ç—å –≤–µ—á–Ω–æ —Å —Å–∞–ø–æ–≥–∞–º–∏-–ª—ã–∂–∞–º–∏ –∏–ª–∏ –±–æ—Å–∏–∫–æ–º –ø–æ –ª—å–¥—É?",
            "–ï—Å–ª–∏ –±—ã –ø–∞—Ä—Ç–Ω—ë—Ä –±—ã–ª –º–∏—Ñ–∏—á–µ—Å–∫–∏–º —Å—É—â–µ—Å—Ç–≤–æ–º, —Ç–æ –∫–∞–∫–∏–º –Ω–µ–ª–µ–ø—ã–º?",
            "–ß—Ç–æ –±—ã –≤—ã–±—Ä–∞–ª –ø–∞—Ä—Ç–Ω—ë—Ä: –∂–∏—Ç—å –≤ –º–∏—Ä–µ, –≥–¥–µ –≤—Å—ë –∏–∑ —Ä–µ–∑–∏–Ω—ã, –∏–ª–∏ –≤ –º–∏—Ä–µ, –≥–¥–µ –≤—Å—ë –∏–∑ —Å—Ç–µ–∫–ª–∞?",
            "–ï—Å–ª–∏ –±—ã –ø–∞—Ä—Ç–Ω—ë—Ä —Å—Ç–∞–ª —Å—Ç–∞—Ç—É–µ–π, –∫–∞–∫—É—é –ø–æ–∑—É –æ–Ω –±—ã –ø—Ä–∏–Ω—è–ª?",
            "–ß—Ç–æ –±—ã –≤—ã–±—Ä–∞–ª –ø–∞—Ä—Ç–Ω—ë—Ä: –±—ã—Ç—å –≤–µ—á–Ω–æ –ª—ã—Å—ã–º –∏–ª–∏ –∏–º–µ—Ç—å –≤–æ–ª–æ—Å—ã –∏–∑ –º—Ö–∞?",
            "–ï—Å–ª–∏ –±—ã –ø–∞—Ä—Ç–Ω—ë—Ä –±—ã–ª –≤–∫—É—Å–æ–º –∂–≤–∞—á–∫–∏, –∫–∞–∫–æ–π –±—ã —ç—Ç–æ –±—ã–ª –≤–∫—É—Å?",
            "–ß—Ç–æ –±—ã –≤—ã–±—Ä–∞–ª –ø–∞—Ä—Ç–Ω—ë—Ä: –Ω–æ–≥–∏ –∫–∞–∫ –ø—Ä—É–∂–∏–Ω—ã –∏–ª–∏ —É—à–∏ –∫–∞–∫ –ø—Ä–æ–ø–µ–ª–ª–µ—Ä—ã?",
            "–ï—Å–ª–∏ –±—ã –ø–∞—Ä—Ç–Ω—ë—Ä –±—ã–ª –∑–∞–ø–∞—Ö–æ–º, –∫–∞–∫–∏–º –±—ã –æ–Ω –±—ã–ª –≤ –æ–±—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–º —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–µ?",
            "–ß—Ç–æ –±—ã –≤—ã–±—Ä–∞–ª –ø–∞—Ä—Ç–Ω—ë—Ä: —Ç–µ–ª–æ –∏–∑ –º–∞—Ä–º–µ–ª–∞–¥–∞ –∏–ª–∏ –∑—É–±—ã –∏–∑ —Å—Ç–µ–∫–ª–∞?",
            "–ï—Å–ª–∏ –±—ã –ø–∞—Ä—Ç–Ω—ë—Ä –±—ã–ª –±–∞–≥–æ–º –≤ –º–∞—Ç—Ä–∏—Ü–µ, –∫–∞–∫–∏–º –∏–º–µ–Ω–Ω–æ?",
            "–ß—Ç–æ –±—ã –≤—ã–±—Ä–∞–ª –ø–∞—Ä—Ç–Ω—ë—Ä: –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É —Ç–µ—Ä—è—Ç—å –æ–¥–∏–Ω –≤–æ–ª–æ—Å –∏–ª–∏ –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É –∑–∞–±—ã–≤–∞—Ç—å –æ–¥–Ω–æ —Å–ª–æ–≤–æ?",
            "–ï—Å–ª–∏ –±—ã –ø–∞—Ä—Ç–Ω—ë—Ä –±—ã–ª –≤–æ–ª—à–µ–±–Ω—ã–º –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–º, –∫–∞–∫–∏–º?",
            "–ß—Ç–æ –±—ã –≤—ã–±—Ä–∞–ª –ø–∞—Ä—Ç–Ω—ë—Ä: –µ—Å—Ç—å —Ç–æ–ª—å–∫–æ —Å—É–ø –ª–æ–∂–∫–æ–π —Å –¥—ã—Ä–∫–æ–π –∏–ª–∏ –ø–∏—Ç—å –≤–æ–¥—É —Å–∏—Ç–æ–º?",
            "–ï—Å–ª–∏ –±—ã –ø–∞—Ä—Ç–Ω—ë—Ä –±—ã–ª —ç–ª–µ–º–µ–Ω—Ç–æ–º –∏–Ω—Ç–µ—Ä—å–µ—Ä–∞, –∫–∞–∫–∏–º?",
            "–ß—Ç–æ –±—ã –≤—ã–±—Ä–∞–ª –ø–∞—Ä—Ç–Ω—ë—Ä: —Ö–æ–¥–∏—Ç—å —Ç–æ–ª—å–∫–æ –±–æ–∫–æ–º –∏–ª–∏ –ø—Ä—ã–≥–∞—Ç—å –≤–º–µ—Å—Ç–æ —à–∞–≥–æ–≤?",
            "–ï—Å–ª–∏ –±—ã –ø–∞—Ä—Ç–Ω—ë—Ä –º–æ–≥ –≤—ã–±—Ä–∞—Ç—å —Å–µ–±–µ –Ω–µ–ª–µ–ø–æ–µ –ø—Ä–æ–∑–≤–∏—â–µ, –∫–∞–∫–æ–µ –±—ã –≤—ã–±—Ä–∞–ª?",
            "–ß—Ç–æ –±—ã –≤—ã–±—Ä–∞–ª –ø–∞—Ä—Ç–Ω—ë—Ä: –≤–º–µ—Å—Ç–æ –∫—Ä–æ–≤–∏ –∏–º–µ—Ç—å –∫–µ—Ç—á—É–ø –∏–ª–∏ –º–∞–π–æ–Ω–µ–∑?",
            "–ï—Å–ª–∏ –±—ã –ø–∞—Ä—Ç–Ω—ë—Ä —Å—Ç–∞–ª –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–º –¥–µ—Ç—Å–∫–æ–π —Å–∫–∞–∑–∫–∏, –∫–∞–∫–∏–º —Å—Ç—Ä–∞–Ω–Ω—ã–º?",
            "–ß—Ç–æ –±—ã –≤—ã–±—Ä–∞–ª –ø–∞—Ä—Ç–Ω—ë—Ä: –≥–ª–∞–∑–∞ –Ω–∞ –ø—è—Ç–∫–∞—Ö –∏–ª–∏ —Ä–æ—Ç –Ω–∞ –ª–æ–∫—Ç–µ?",
            "–ï—Å–ª–∏ –±—ã –ø–∞—Ä—Ç–Ω—ë—Ä –±—ã–ª –ø–æ–≥–æ–¥–Ω—ã–º —è–≤–ª–µ–Ω–∏–µ–º, —Ç–æ –∫–∞–∫–∏–º?",
            "–ß—Ç–æ –±—ã –≤—ã–±—Ä–∞–ª –ø–∞—Ä—Ç–Ω—ë—Ä: –≤—Å–µ–≥–¥–∞ –±—ã—Ç—å –ª–∏–ø–∫–∏–º –∏–ª–∏ –≤—Å–µ–≥–¥–∞ –±—ã—Ç—å —Å–∫–æ–ª—å–∑–∫–∏–º?",
            "–ï—Å–ª–∏ –±—ã –ø–∞—Ä—Ç–Ω—ë—Ä –±—ã–ª –æ—à–∏–±–∫–æ–π –Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–µ, –∫–∞–∫–æ–π?",
            "–ß—Ç–æ –±—ã –≤—ã–±—Ä–∞–ª –ø–∞—Ä—Ç–Ω—ë—Ä: –≥–æ–≤–æ—Ä–∏—Ç—å —Ç–æ–ª—å–∫–æ –≥–æ–ª–æ—Å–æ–º —Ä–æ–±–æ—Ç–∞ –∏–ª–∏ –≤—Å–µ–≥–¥–∞ —à–µ–ø—Ç–∞—Ç—å —É–ª—å—Ç—Ä–∞–∑–≤—É–∫–æ–º?",
            "–ï—Å–ª–∏ –±—ã –ø–∞—Ä—Ç–Ω—ë—Ä –±—ã–ª –º–∞–≥–∏—á–µ—Å–∫–∏–º –∂–∏–≤–æ—Ç–Ω—ã–º, —Ç–æ –∫–∞–∫–∏–º –±—ã —Å—Ç—Ä–∞–Ω–Ω—ã–º –≥–∏–±—Ä–∏–¥–æ–º?",
            "–ß—Ç–æ –±—ã –≤—ã–±—Ä–∞–ª –ø–∞—Ä—Ç–Ω—ë—Ä: –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –ø—Ä–µ–≤—Ä–∞—â–∞—Ç—å—Å—è –≤ —Ö–ª–µ–± –∏–ª–∏ –≤ —á–∞–π–Ω–∏–∫?",
            "–ï—Å–ª–∏ –±—ã –ø–∞—Ä—Ç–Ω—ë—Ä –º–æ–≥ –æ—Å—Ç–∞—Ç—å—Å—è –Ω–∞–≤—Å–µ–≥–¥–∞ –º—É–ª—å—Ç—è—à–Ω—ã–º –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–º, –∫–µ–º –∏–º–µ–Ω–Ω–æ?"
        ];
        
        function moveDots(action) {
            const dot1 = document.querySelector('.dot1');
            const dot2 = document.querySelector('.dot2');
            const root = document.querySelector('.root');
            
            if (action === 'correct') {
                // Move dots 1 unit closer
                currentDistance = Math.max(minDistance, currentDistance - 1);
                // Show heart animation
                showAnswerAnimation('heart');
            } else if (action === 'incorrect') {
                // Move dots 0.5 units apart
                currentDistance = Math.min(maxDistance, currentDistance + 0.5);
                // Show broken heart animation
                showAnswerAnimation('broken-heart');
            }
            
            updateDotPositions();
            updateScoreDisplay();
            
            // Change question after each answer
            showRandomQuestion();
            
            // Check for victory condition
            if (currentDistance <= 0) {
                showVictoryScreen();
            }
        }
        
        function updateDotPositions() {
            const dot1 = document.querySelector('.dot1');
            const dot2 = document.querySelector('.dot2');
            const root = document.querySelector('.root');
            
            // Calculate positions based on current distance
            // Container width is 600px, so we work with that
            const containerWidth = 600;
            const dotSize = 20;
            const availableWidth = containerWidth - dotSize;
            
            // Convert distance to percentage
            const distancePercentage = (currentDistance / maxDistance) * 100;
            const leftPosition = (100 - distancePercentage) / 2;
            const rightPosition = leftPosition;
            
            // Update dot positions
            dot1.style.left = `${leftPosition}%`;
            dot2.style.right = `${rightPosition}%`;
            
            // Update root line
            root.style.left = `${leftPosition + 1}%`;
            root.style.right = `${rightPosition + 1}%`;
            
            // Remove any existing classes
            root.classList.remove('initial', 'correct', 'incorrect');
            
            if (currentDistance <= 0) {
                root.classList.add('correct');
            } else {
                root.classList.add('initial');
            }
        }
        
        function updateScoreDisplay() {
            let scoreElement = document.querySelector('.score-display');
            if (!scoreElement) {
                scoreElement = document.createElement('div');
                scoreElement.className = 'score-display';
                scoreElement.style.cssText = `
                    position: absolute;
                    top: 20px;
                    left: 20px;
                    color: #ff69b4;
                    font-size: 18px;
                    font-weight: bold;
                `;
                document.querySelector('.container').appendChild(scoreElement);
            }
            
            const progress = ((maxDistance - currentDistance) / maxDistance * 100).toFixed(1);
            scoreElement.textContent = `Progress: ${progress}%`;
        }

        function showVictoryScreen() {
            // Hide game screen and show victory screen
            showScreen('victory');
            createVictoryTexts();
            startHeartAnimation();
        }
        
        function createVictoryTexts() {
            const victoryScreen = document.getElementById('victoryScreen');
            
            // Create 40 "love" texts and make them fall immediately
            for (let i = 0; i < 40; i++) {
                const loveText = document.createElement('div');
                loveText.className = 'victory-text love';
                loveText.textContent = 'love';
                
                // Random position all over the screen
                loveText.style.left = Math.random() * 100 + '%';
                loveText.style.top = Math.random() * 100 + '%';
                loveText.style.fontSize = (Math.random() * 200 + 300) + 'px';
                
                // Start falling immediately with pulsation - smoother timing
                const duration = Math.random() * 3 + 8; // 8-11 seconds for smoother movement
                loveText.style.animation = `fallDown ${duration}s cubic-bezier(0.25, 0.46, 0.45, 0.94) infinite, fontPulse ${Math.random() * 2 + 2}s ease-in-out infinite`;
                loveText.style.animationDelay = '0s';
                
                victoryScreen.appendChild(loveText);
                
                // Remove text after it falls off screen
                setTimeout(() => {
                    if (loveText.parentNode) {
                        loveText.parentNode.removeChild(loveText);
                    }
                }, (duration + 2) * 1000);
            }
            
            // Start continuous text creation immediately
            startContinuousTextCreation();
        }
        
        
        function startContinuousTextCreation() {
            const victoryScreen = document.getElementById('victoryScreen');
            
            function createNewText() {
                const loveText = document.createElement('div');
                loveText.className = 'victory-text love';
                loveText.textContent = 'love';
                
                // Random horizontal position, start from top
                loveText.style.left = Math.random() * 100 + '%';
                loveText.style.top = '-200px'; // Start above the screen
                loveText.style.fontSize = (Math.random() * 200 + 300) + 'px';
                
                // Fall down animation with variable speed - NO DELAY - smoother
                const duration = Math.random() * 3 + 8; // 8-11 seconds for smoother movement
                loveText.style.animation = `fallDown ${duration}s cubic-bezier(0.25, 0.46, 0.45, 0.94) infinite, fontPulse ${Math.random() * 2 + 2}s ease-in-out infinite`;
                loveText.style.animationDelay = '0s'; // Force no delay
                
                victoryScreen.appendChild(loveText);
                
                // Remove text after it falls off screen
                setTimeout(() => {
                    if (loveText.parentNode) {
                        loveText.parentNode.removeChild(loveText);
                    }
                }, (duration + 2) * 1000);
            }
            
            // Create new text every 0.4 seconds for smoother continuous falling
            const textInterval = setInterval(createNewText, 400);
            
            // Store interval ID for cleanup
            window.textInterval = textInterval;
        }
        
        function startHeartAnimation() {
            const heartSymbols = ['‚ô•', 'üíñ', 'üíï', 'üíó', 'üíù', 'üíò', 'üíû', 'üíì', 'üíî', 'üíü'];
            
            function createHeart() {
                const heart = document.createElement('div');
                heart.className = 'heart';
                heart.textContent = heartSymbols[Math.floor(Math.random() * heartSymbols.length)];
                heart.style.left = Math.random() * 100 + '%';
                heart.style.animationDuration = (Math.random() * 2 + 3) + 's';
                heart.style.fontSize = (Math.random() * 15 + 20) + 'px';
                heart.style.opacity = Math.random() * 0.5 + 0.7;
                
                document.body.appendChild(heart);
                
                // Remove heart after animation
                setTimeout(() => {
                    if (heart.parentNode) {
                        heart.parentNode.removeChild(heart);
                    }
                }, 5000);
            }
            
            // Create hearts continuously - smoother timing
            const heartInterval = setInterval(createHeart, 200);
            
            // Store interval ID for cleanup
            window.heartInterval = heartInterval;
        }
        
        function restartGame() {
            // Stop heart animation
            if (window.heartInterval) {
                clearInterval(window.heartInterval);
            }
            
            // Stop text creation
            if (window.textInterval) {
                clearInterval(window.textInterval);
            }
            
            // Remove all existing hearts
            const hearts = document.querySelectorAll('.heart');
            hearts.forEach(heart => heart.remove());
            
            // Remove all victory texts
            const victoryTexts = document.querySelectorAll('.victory-text');
            victoryTexts.forEach(text => text.remove());
            
            // Reset game state
            currentDistance = 20;
            
            // Go back to game screen
            showScreen('game');
            updateDotPositions();
            updateScoreDisplay();
            showRandomQuestion();
        }

        // Initialize face detection
        async function initializeFaceDetection() {
            try {
                faceDetector = new FaceDetection({
                    locateFile: (file) => `https://cdn.jsdelivr.net/npm/@mediapipe/face_detection@0.4/${file}`
                });
                await faceDetector.setOptions({
                    model: 'short',
                    minDetectionConfidence: 0.5,
                });
                console.log('Face detection initialized');
            } catch (error) {
                console.error('Error initializing face detection:', error);
                // Fallback to simple center crop if face detection fails
            }
        }

        // Photo upload and processing functions
        function handlePhotoUpload(dotNumber, input) {
            const file = input.files[0];
            if (file) {
                uploadedPhotos[`photo${dotNumber}`] = file;
                autoCropPhoto(file, dotNumber);
            }
        }

        async function autoCropPhoto(file, dotNumber) {
            showProcessingModal(`–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ç–æ ${dotNumber}...`);
            
            try {
                const img = new Image();
                const reader = new FileReader();
                
                reader.onload = async function(e) {
                    img.onload = async function() {
                        try {
                            let cropData;
                            
                            if (faceDetector) {
                                // Try face detection first
                                cropData = await detectAndCropFace(img);
                            }
                            
                            if (!cropData) {
                                // Fallback to center crop
                                cropData = getCenterCrop(img);
                            }
                            
                            const croppedFile = await cropImageToFile(img, cropData);
                            uploadedPhotos[`photo${dotNumber}`] = croppedFile;
                            
                            hideProcessingModal();
                            checkPhotosReady();
                            
                        } catch (error) {
                            console.error('Error processing photo:', error);
                            // Fallback to center crop
                            const cropData = getCenterCrop(img);
                            const croppedFile = await cropImageToFile(img, cropData);
                            uploadedPhotos[`photo${dotNumber}`] = croppedFile;
                            
                            hideProcessingModal();
                            checkPhotosReady();
                        }
                    };
                    img.src = e.target.result;
                };
                reader.readAsDataURL(file);
                
            } catch (error) {
                console.error('Error reading file:', error);
                hideProcessingModal();
            }
        }

        async function detectAndCropFace(img) {
            try {
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                canvas.width = img.width;
                canvas.height = img.height;
                ctx.drawImage(img, 0, 0);
                
                const detections = await faceDetector.detect(canvas);
                
                if (detections && detections.length > 0) {
                    // Get the largest face
                    const largestFace = detections.reduce((largest, current) => {
                        const currentArea = current.boundingBox.width * current.boundingBox.height;
                        const largestArea = largest.boundingBox.width * largest.boundingBox.height;
                        return currentArea > largestArea ? current : largest;
                    });
                    
                    const bbox = largestFace.boundingBox;
                    
                    // Calculate face center
                    const faceCenterX = bbox.x + bbox.width / 2;
                    const faceCenterY = bbox.y + bbox.height / 2;
                    
                    // Create square crop centered on face
                    const cropSize = Math.max(bbox.width, bbox.height) * 1.8; // 80% larger than face
                    const halfSize = cropSize / 2;
                    
                    // Center the crop on the face
                    const x = Math.max(0, Math.min(img.width - cropSize, faceCenterX - halfSize));
                    const y = Math.max(0, Math.min(img.height - cropSize, faceCenterY - halfSize));
                    const width = Math.min(cropSize, img.width - x);
                    const height = Math.min(cropSize, img.height - y);
                    
                    return { x, y, width, height };
                }
            } catch (error) {
                console.error('Face detection error:', error);
            }
            return null;
        }

        function getCenterCrop(img) {
            // Fallback: crop center square of the image
            const cropSize = Math.min(img.width, img.height) * 0.8; // 80% of smaller dimension
            const x = (img.width - cropSize) / 2;
            const y = (img.height - cropSize) / 2;
            
            return { x, y, width: cropSize, height: cropSize };
        }

        async function cropImageToFile(img, cropData) {
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            
            // Standard size for all faces (square)
            const standardSize = 200; // 200x200 pixels for all faces
            canvas.width = standardSize;
            canvas.height = standardSize;
            
            // Draw cropped portion scaled to standard size
            ctx.drawImage(
                img,
                cropData.x, cropData.y, cropData.width, cropData.height,
                0, 0, standardSize, standardSize
            );
            
            // Convert to blob
            return new Promise((resolve) => {
                canvas.toBlob(function(blob) {
                    const croppedFile = new File([blob], `cropped_photo.jpg`, { type: 'image/jpeg' });
                    resolve(croppedFile);
                }, 'image/jpeg', 0.9);
            });
        }


        function showProcessingModal(text) {
            const modal = document.getElementById('processingModal');
            const textElement = document.getElementById('processingText');
            textElement.textContent = text;
            modal.style.display = 'flex';
        }

        function hideProcessingModal() {
            const modal = document.getElementById('processingModal');
            modal.style.display = 'none';
        }

        function checkPhotosReady() {
            const processBtn = document.getElementById('processBtn');
            if (uploadedPhotos.photo1 && uploadedPhotos.photo2) {
                processBtn.disabled = false;
                processBtn.textContent = 'Process Photos';
            } else {
                processBtn.disabled = true;
                processBtn.textContent = 'Upload Both Photos';
            }
        }

        function processPhotos() {
            const processBtn = document.getElementById('processBtn');
            processBtn.disabled = true;
            processBtn.textContent = 'Processing...';

            // Simulate photo processing (in a real app, you'd use AI/ML services)
            setTimeout(() => {
                displayProcessedPhotos();
                processBtn.textContent = 'Photos Processed!';
                processBtn.style.backgroundColor = '#4CAF50';
            }, 2000);
        }

        function displayProcessedPhotos() {
            // Create image elements for the processed photos
            const person1Img = document.getElementById('person1');
            const person2Img = document.getElementById('person2');

            // For demo purposes, we'll use the uploaded photos directly
            // In a real implementation, you'd use AI to extract people from photos
            if (uploadedPhotos.photo1) {
                const reader1 = new FileReader();
                reader1.onload = function(e) {
                    person1Img.src = e.target.result;
                    person1Img.style.display = 'block';
                };
                reader1.readAsDataURL(uploadedPhotos.photo1);
            } else {
                // Hide photo if not uploaded
                person1Img.style.display = 'none';
            }

            if (uploadedPhotos.photo2) {
                const reader2 = new FileReader();
                reader2.onload = function(e) {
                    person2Img.src = e.target.result;
                    person2Img.style.display = 'block';
                };
                reader2.readAsDataURL(uploadedPhotos.photo2);
            } else {
                // Hide photo if not uploaded
                person2Img.style.display = 'none';
            }
        }

        // Screen management functions
        function showScreen(screenName) {
            // Hide all screens
            document.getElementById('welcomeScreen').style.display = 'none';
            document.getElementById('kissingScreen').style.display = 'none';
            document.getElementById('fighterScreen').style.display = 'none';
            document.getElementById('gameScreen').style.display = 'none';
            document.getElementById('endScreen').style.display = 'none';
            document.getElementById('victoryScreen').style.display = 'none';
            
            // Show the requested screen
            switch(screenName) {
                case 'welcome':
                    document.getElementById('welcomeScreen').style.display = 'flex';
                    break;
                case 'kissing':
                    document.getElementById('kissingScreen').style.display = 'flex';
                    break;
                case 'fighter':
                    document.getElementById('fighterScreen').style.display = 'flex';
                    break;
                case 'game':
                    document.getElementById('gameScreen').style.display = 'flex';
                    break;
                case 'end':
                    document.getElementById('endScreen').style.display = 'flex';
                    break;
                case 'victory':
                    document.getElementById('victoryScreen').style.display = 'flex';
                    break;
            }
            currentScreen = screenName;
        }

        // Game flow functions
        function showKissingScreenWithHearts() {
            // Show heart animations
            showHeartAnimation();
            // Then show kissing screen
            setTimeout(() => {
                showScreen('kissing');
            }, 1500);
        }

        function showKissingScreen() {
            showScreen('kissing');
        }

        function showQuestionAndButton() {
            // Change text to "—Ç–æ—á–Ω–æ?" and button to "–¥–∞" simultaneously
            const kissingText = document.getElementById('kissingText');
            const kissButton = document.getElementById('kissButton');
            
            kissingText.textContent = '—Ç–æ—á–Ω–æ?';
            kissButton.textContent = '–¥–∞';
            kissButton.onclick = showQuestionMarksAndKisses;
            
            // Show falling question marks from bottom
            showQuestionMarkAnimation();
        }

        function showQuestionMarksAndKisses() {
            // Stop the continuous question mark animation
            if (questionMarkInterval) {
                clearInterval(questionMarkInterval);
                questionMarkInterval = null;
            }
            
            // Remove all existing question mark elements
            const questionMarkElements = document.querySelectorAll('.question-mark-animation');
            questionMarkElements.forEach(element => {
                if (element.parentNode) {
                    element.parentNode.removeChild(element);
                }
            });
            
            // Show kiss animations immediately
            showKissAnimation();
            
            // Keep text and button visible for 1.5 seconds, then transition
            setTimeout(() => {
                showScreen('fighter');
            }, 1500);
        }

        function startGameWithKisses() {
            // Show kiss animations
            showKissAnimation();
            // Then start game
            setTimeout(() => {
                showScreen('fighter');
            }, 1500);
        }

        function startGame() {
            showScreen('fighter');
        }

        function handleFighterUpload(fighterNumber, input) {
            const file = input.files[0];
            if (file) {
                uploadedPhotos[`photo${fighterNumber}`] = file;
                autoCropPhoto(file, fighterNumber);
            } else {
                // Clear the photo if no file selected
                uploadedPhotos[`photo${fighterNumber}`] = null;
                // Hide the photo display
                const photoElement = document.getElementById(`person${fighterNumber}`);
                if (photoElement) {
                    photoElement.style.display = 'none';
                }
            }
            checkFightersReady();
        }

        function updateFighterName(fighterNumber, input) {
            fighterNames[`name${fighterNumber}`] = input.value.trim();
            checkFightersReady();
        }

        function openCamera(fighterNumber) {
            // Create a file input with camera capture
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = 'image/*';
            input.capture = 'environment'; // Use back camera on mobile
            
            input.onchange = function(event) {
                if (event.target.files && event.target.files[0]) {
                    handleFighterUpload(fighterNumber, event.target);
                }
            };
            
            input.click();
        }

        function openGallery(fighterNumber) {
            // Create a file input for gallery selection
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = 'image/*';
            input.multiple = false; // Allow only one file
            
            input.onchange = function(event) {
                if (event.target.files && event.target.files[0]) {
                    handleFighterUpload(fighterNumber, event.target);
                }
            };
            
            input.click();
        }

        function checkFightersReady() {
            const startBtn = document.getElementById('startGameBtn');
            if (fighterNames.name1 && fighterNames.name2) {
                startBtn.disabled = false;
                startBtn.textContent = '–ù–∞—á–∞—Ç—å –ø—É—Ç—å –∫–æ—Å–º–∏—á–µ—Å–∫–æ–π –ª—é–±–≤–∏!';
            } else {
                startBtn.disabled = true;
                startBtn.textContent = '–í–≤–µ–¥–∏—Ç–µ –∏–º–µ–Ω–∞ –æ–±–æ–∏—Ö –±–æ–π—Ü–æ–≤';
            }
        }

        function beginGame() {
            // Show mixed heart animation
            showMixedHeartAnimation();
            // Then start game
            setTimeout(() => {
                showScreen('game');
                displayProcessedPhotos();
                updateDotPositions();
                updateScoreDisplay();
                showRandomQuestion();
            }, 1500);
        }

        function showRandomQuestion() {
            const questionDisplay = document.getElementById('questionDisplay');
            const questionHeader = document.getElementById('questionHeader');
            let newQuestion;
            
            // Make sure we don't show the same question twice in a row
            do {
                newQuestion = questions[Math.floor(Math.random() * questions.length)];
            } while (newQuestion === currentQuestion && questions.length > 1);
            
            // Alternate between the two names
            const currentName = currentQuestionIndex % 2 === 0 ? fighterNames.name1 : fighterNames.name2;
            currentQuestionIndex++;
            
            // Replace "–ø–∞—Ä—Ç–Ω—ë—Ä" with the actual name
            const personalizedQuestion = newQuestion.replace(/–ø–∞—Ä—Ç–Ω—ë—Ä/g, currentName);
            
            // Clear any existing fade timeout to ensure consistent timing
            if (headerFadeTimeout) {
                clearTimeout(headerFadeTimeout);
            }
            
            // Reset and update question header
            questionHeader.className = 'question-header'; // Remove fade-out class
            questionHeader.style.opacity = '1'; // Reset opacity
            questionHeader.style.animation = 'none'; // Reset animation
            questionHeader.textContent = `–í–æ–ø—Ä–æ—Å –¥–ª—è ${currentName}`;
            
            // Force reflow to ensure reset is applied
            questionHeader.offsetHeight;
            
            // Start fade-out animation after exactly 4 seconds
            headerFadeTimeout = setTimeout(() => {
                questionHeader.classList.add('fade-out');
                // Ensure the animation starts
                questionHeader.style.animation = 'fadeOut 1s ease-out forwards';
            }, 4000);
            
            currentQuestion = newQuestion;
            questionDisplay.textContent = personalizedQuestion;
        }

        function showAnswerAnimation(type) {
            const gameScreen = document.getElementById('gameScreen');
            const animation = document.createElement('div');
            
            if (type === 'heart') {
                animation.className = 'answer-heart';
                animation.textContent = '‚ô•';
            } else if (type === 'broken-heart') {
                animation.className = 'answer-broken-heart';
                animation.textContent = 'üíî';
            }
            
            // Position animation randomly around the center
            const centerX = window.innerWidth / 2;
            const centerY = window.innerHeight / 2;
            const randomX = centerX + (Math.random() - 0.5) * 200;
            const randomY = centerY + (Math.random() - 0.5) * 100;
            
            animation.style.left = randomX + 'px';
            animation.style.top = randomY + 'px';
            
            gameScreen.appendChild(animation);
            
            // Remove animation after it completes
            setTimeout(() => {
                if (animation.parentNode) {
                    animation.parentNode.removeChild(animation);
                }
            }, 2000);
        }

        function showHeartAnimation() {
            // Create multiple hearts that persist across screens
            for (let i = 0; i < 10; i++) {
                setTimeout(() => {
                    const heart = document.createElement('div');
                    heart.className = 'answer-heart';
                    heart.textContent = '‚ô•';
                    heart.style.position = 'fixed';
                    heart.style.zIndex = '1003';
                    
                    // Position randomly around the screen
                    const randomX = Math.random() * window.innerWidth;
                    const randomY = Math.random() * window.innerHeight;
                    
                    heart.style.left = randomX + 'px';
                    heart.style.top = randomY + 'px';
                    
                    document.body.appendChild(heart);
                    
                    // Remove after animation
                    setTimeout(() => {
                        if (heart.parentNode) {
                            heart.parentNode.removeChild(heart);
                        }
                    }, 2000);
                }, i * 120);
            }
        }

        function showQuestionMarkAnimation() {
            // Clear any existing interval
            if (questionMarkInterval) {
                clearInterval(questionMarkInterval);
            }
            
            // Create initial batch of question marks and doubt emojis scattered across the entire screen
            for (let i = 0; i < 50; i++) {
                createQuestionMarkElement();
            }
            
            // Start continuous creation of falling elements
            questionMarkInterval = setInterval(() => {
                createQuestionMarkElement();
            }, 300); // Create new element every 300ms
        }
        
        function createQuestionMarkElement() {
            const element = document.createElement('div');
            element.className = 'question-mark-animation';
            
            // Randomly choose between question mark and doubt emoji
            const isDoubt = Math.random() < 0.5; // 50% chance for doubt emoji
            element.textContent = isDoubt ? 'ü§î' : '?';
            
            element.style.position = 'fixed';
            element.style.zIndex = '1003';
            
            // Position randomly across the entire screen (including bottom)
            const randomX = Math.random() * window.innerWidth;
            const randomY = Math.random() * window.innerHeight;
            
            element.style.left = randomX + 'px';
            element.style.top = randomY + 'px';
            
            document.body.appendChild(element);
            
            // Remove after animation
            setTimeout(() => {
                if (element.parentNode) {
                    element.parentNode.removeChild(element);
                }
            }, 4000); // Longer duration for slower fall
        }

        function showKissAnimation() {
            // Create multiple kisses that persist across screens
            for (let i = 0; i < 10; i++) {
                setTimeout(() => {
                    const kiss = document.createElement('div');
                    kiss.className = 'kiss-animation';
                    kiss.textContent = 'üíã';
                    kiss.style.position = 'fixed';
                    kiss.style.zIndex = '1003';
                    
                    // Position randomly around the screen
                    const randomX = Math.random() * window.innerWidth;
                    const randomY = Math.random() * window.innerHeight;
                    
                    kiss.style.left = randomX + 'px';
                    kiss.style.top = randomY + 'px';
                    
                    document.body.appendChild(kiss);
                    
                    // Remove after animation
                    setTimeout(() => {
                        if (kiss.parentNode) {
                            kiss.parentNode.removeChild(kiss);
                        }
                    }, 2000);
                }, i * 120);
            }
        }

        function showMixedHeartAnimation() {
            // Create mixed hearts (regular and broken) that persist across screens
            for (let i = 0; i < 10; i++) {
                setTimeout(() => {
                    const heart = document.createElement('div');
                    
                    // Randomly choose between regular heart and broken heart
                    const isBroken = Math.random() < 0.4; // 40% chance for broken heart
                    
                    if (isBroken) {
                        heart.className = 'answer-broken-heart';
                        heart.textContent = 'üíî';
                    } else {
                        heart.className = 'answer-heart';
                        heart.textContent = '‚ô•';
                    }
                    
                    heart.style.position = 'fixed';
                    heart.style.zIndex = '1003';
                    
                    // Position randomly around the screen
                    const randomX = Math.random() * window.innerWidth;
                    const randomY = Math.random() * window.innerHeight;
                    
                    heart.style.left = randomX + 'px';
                    heart.style.top = randomY + 'px';
                    
                    document.body.appendChild(heart);
                    
                    // Remove after animation
                    setTimeout(() => {
                        if (heart.parentNode) {
                            heart.parentNode.removeChild(heart);
                        }
                    }, 2000);
                }, i * 120);
            }
        }

        function restartFromBeginning() {
            // Reset game state
            currentDistance = 20;
            uploadedPhotos = { photo1: null, photo2: null };
            fighterNames = { name1: '', name2: '' };
            currentQuestionIndex = 0;
            
            // Clear uploaded photos and names
            document.getElementById('fighter1').value = '';
            document.getElementById('fighter2').value = '';
            document.getElementById('name1').value = '';
            document.getElementById('name2').value = '';
            
            // Hide all photos
            document.getElementById('person1').style.display = 'none';
            document.getElementById('person2').style.display = 'none';
            
            // Stop any animations
            if (window.heartInterval) {
                clearInterval(window.heartInterval);
            }
            if (window.textInterval) {
                clearInterval(window.textInterval);
            }
            
            // Remove all victory elements
            const hearts = document.querySelectorAll('.heart');
            hearts.forEach(heart => heart.remove());
            const victoryTexts = document.querySelectorAll('.victory-text');
            victoryTexts.forEach(text => text.remove());
            
            // Go back to welcome screen
            showScreen('welcome');
        }

        // Override the old checkPhotosReady function
        function checkPhotosReady() {
            checkFightersReady();
        }

        // Initialize the page
        window.addEventListener('load', async function() {
            showScreen('welcome');
            await initializeFaceDetection();
        });
    </script>
</body>
</html>
